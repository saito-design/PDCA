# 引継ぎファイル

**作成日時**: 2026-02-16 13:35

## 基本ルール参照
- `C:/Users/yasuh/OneDrive/デスクトップ/APP/CLAUDE.md`

## プロジェクト
- **ディレクトリ**: `PDCA/`
- **技術スタック**: Next.js 16.1.6 (Turbopack), TypeScript, Tailwind CSS
- **データ保存**: ローカルキャッシュ（`.cache/`配下のJSONファイル）

## 完了した作業

### Supabase → キャッシュベースへの移行
- `src/lib/supabase.ts` を削除
- 各APIをローカルファイルベース（`.cache/*.json`）に変更
- 認証周りの修正（`src/lib/auth.ts`）

### 企業追加機能
- `POST /api/clients` で企業追加
- 企業IDは自動生成（`client-{timestamp}-{random}`）
- UIに「企業を追加」ボタン + モーダル実装済み

### 企業削除機能
- `GET /api/clients/[clientId]` - 企業情報 + 関連データ数取得
- `DELETE /api/clients/[clientId]` - 企業と関連データを一括削除
- マスター企業（junestory, tottori-kyosai）は削除不可
- UIに削除ボタン（ゴミ箱アイコン）+ 確認モーダル実装済み
- **ビルド成功確認済み**

## 未完了・次にやること

### コミット待ち
以下の変更がステージ済み or 未ステージ：
```
ステージ済み:
- .cache/clients.json, .cache/entities.json（新規）
- src/app/api/clients/*/route.ts 各種修正
- src/lib/auth.ts 修正
- src/lib/supabase.ts 削除

未ステージ:
- src/app/clients/page.tsx（削除UI追加）

未追跡:
- src/app/api/clients/[clientId]/route.ts（削除API）
```

### 推奨アクション
1. `npm run dev` で動作確認
2. 問題なければ全ファイルをステージしてコミット
3. 必要に応じてpush

## 重要な決定事項
- マスター企業2社はコードにハードコード（削除不可）
- ユーザー追加の企業は `.cache/clients.json` に保存
- 関連データ（部署、イシュー、サイクル、グラフ）は企業削除時に一括削除

## 注意点
- Vercel Hobbyプランのため、ビルド回数に注意（まとめてpush推奨）
- `.cache/` 配下はローカル専用。Vercel上では揮発性
